<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animation Modification Tool</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/pyodide/v0.25.0/full/pyodide.js"></script>
</head>
<body>
    <div class="container">
        <!-- Gradient Title -->
        <div class="title-container">
            <span class="title-char large">B</span>
            <span class="title-char small">A</span>
            <span class="title-char small">R</span>
            <span class="title-char small">E</span>
            <span class="title-char large">I</span>
            <span class="title-char small">R</span>
            <span class="title-char small">O</span>
            <span class="title-char small">N</span>
        </div>

        <!-- File Selection -->
        <div class="input-group">
            <label for="inputFile">1. Select Animation File:</label>
            <input type="file" id="inputFile" accept=".bytes,.txt">
        </div>

        <!-- Operation Selection -->
        <div class="controls-panel">
            <h2>2. Operation Selection</h2>
            <label for="operationSelect">Operation:</label>
            <select id="operationSelect">
                <option value="SHORTEN">SHORTEN: Shortens animation by a factor</option>
                <option value="LENGTHEN">LENGTHEN: Lengthens animation by a factor</option>
                <option value="EXTRACT_CSV">EXTRACT_CSV: Extracts animation data to CSV</option>
                <option value="SPLICER">SPLICER: Splices two animations</option>
                <option value="DASH">DASH: Applies dash effect</option>
                <option value="BIRTH_LOCATION">BIRTH_LOCATION: Birth location offset</option>
                <option value="X_DOUBLE">X_DOUBLE: Doubles X-axis values</option>
                <option value="TRIMMER">TRIMMER: Removes frame range</option>
                <option value="AXIS_ADDER">AXIS_ADDER: Adds values to axis</option>
                <option value="AXIS_SCALER">AXIS_SCALER: Scales bone coordinates</option>
            </select>

            <!-- Dynamic Parameters -->
            <div id="paramsContainer"></div>
        </div>

        <!-- Splicer Section -->
        <div id="splicerSection" class="special-panel" style="display: none;">
            <h3>SPLICER Parameters</h3>
            <div class="file-pair">
                <div class="file-input">
                    <label>File 1:</label>
                    <input type="file" id="splicerFile1" accept=".bytes,.txt">
                    <input type="text" id="splicerRange1" placeholder="1-10" value="1-10">
                </div>
                <div class="file-input">
                    <label>File 2:</label>
                    <input type="file" id="splicerFile2" accept=".bytes,.txt">
                    <input type="text" id="splicerRange2" placeholder="1-10" value="1-10">
                </div>
            </div>
            <p class="note">Files must have identical bone structures</p>
        </div>

        <!-- Bone Selection -->
        <div id="boneSelectionSection" class="special-panel" style="display: none;">
            <h3>Bone Selection</h3>
            <div class="bone-controls">
                <button id="selectAllBones">Select All</button>
                <button id="deselectAllBones">Deselect All</button>
            </div>
            <div id="boneList" class="bone-list"></div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button id="runButton" disabled>Initializing Pyodide...</button>
            <button id="settingsButton">Settings</button>
            <label class="checkbox-label">
                <input type="checkbox" id="saveCSV" checked>
                Save CSV Comparison
            </label>
        </div>

        <!-- Log Output -->
        <div class="log-area">
            <h2>Processing Log</h2>
            <pre id="outputLog">Loading Pyodide runtime...</pre>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <h2>Settings</h2>
            <div class="setting-group">
                <label>Export Format:</label>
                <select id="exportExt">
                    <option value=".bytes">.bytes</option>
                    <option value=".txt">.txt</option>
                </select>
            </div>
            <div class="modal-buttons">
                <button id="saveSettings">Save</button>
                <button id="cancelSettings">Cancel</button>
            </div>
        </div>
    </div>

    <script src="main.js"></script>
</body>
</html>